<!DOCTYPE html>
<html lang="en-GB" dir="ltr">
<head><script src="/am-writing-hugo-theme/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=am-writing-hugo-theme/livereload" data-no-instant defer></script>
  <meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Nuxt.js 如何部署 Artalk 和遇到的问题 | Demo Author</title>
<style>
  
  
  @font-face {
      font-family: 'Droid Sans Regular';
      src: url('http://localhost:1313/am-writing-hugo-theme/fonts/DroidSans-webfont.woff') format('woff2');
  }
  @font-face {
      font-family: 'Droid Serif';
      src: url('http://localhost:1313/am-writing-hugo-theme/fonts/DroidSerif-Regular.ttf') format('truetype');
  }
  </style>
    <link rel="stylesheet" href="/am-writing-hugo-theme/css/serif.css">
    <link rel="stylesheet" href="/am-writing-hugo-theme/css/main.css">
    <link rel="stylesheet" href="/am-writing-hugo-theme/css/nord.css">


      <script src="/am-writing-hugo-theme/js/main.js"></script>


</head>
<body>
  <main>
    <section class="left">
      <article>
    <a href="http://localhost:1313/am-writing-hugo-theme/">
        <img src="http://localhost:1313/am-writing-hugo-theme//demo.png" alt="Demo Author" title="Demo Author" class="avatar" />
    </a>
    <h1 class="about">Demo Author</h1>
    <p>
    <a href="http://localhost:1313/am-writing-hugo-theme/fr/102/"><img src="/am-writing-hugo-theme/img/fr.svg" alt="Français" height="20"></a>&nbsp;
    
    
        <a href="http://localhost:1313/am-writing-hugo-theme/en/102/"><img src="/am-writing-hugo-theme/img/en.svg" alt="English" height="20"></a>
        
    


    <h2 class="about">About author</h2>

    <div class="about-author">Tell you readers who you are.</div>

    

    
    <h2 class="about">Where to fine me</h2>
    <p>
        
        <a rel="me" href="https://fosstodon.org/@Wivik" class="social-button" title="Mastodon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36"><path d="M21.2595 13.9898C20.9852 15.4006 18.8033 16.9446 16.2974 17.2439C14.9907 17.3998 13.7041 17.5431 12.3321 17.4802C10.0885 17.3774 8.31809 16.9446 8.31809 16.9446C8.31809 17.163 8.33156 17.371 8.3585 17.5655C8.65019 19.7797 10.5541 19.9124 12.3576 19.9742C14.1779 20.0365 15.7987 19.5254 15.7987 19.5254L15.8735 21.1711C15.8735 21.1711 14.6003 21.8548 12.3321 21.9805C11.0814 22.0493 9.52849 21.9491 7.71973 21.4703C3.79684 20.432 3.12219 16.2504 3.01896 12.0074C2.98749 10.7477 3.00689 9.55981 3.00689 8.56632C3.00689 4.22771 5.84955 2.95599 5.84955 2.95599C7.2829 2.29772 9.74238 2.0209 12.2993 2H12.3621C14.919 2.0209 17.3801 2.29772 18.8133 2.95599C18.8133 2.95599 21.6559 4.22771 21.6559 8.56632C21.6559 8.56632 21.6916 11.7674 21.2595 13.9898ZM18.3029 8.9029C18.3029 7.82924 18.0295 6.97604 17.4805 6.34482C16.9142 5.71359 16.1726 5.39001 15.2522 5.39001C14.187 5.39001 13.3805 5.79937 12.8473 6.61819L12.3288 7.48723L11.8104 6.61819C11.2771 5.79937 10.4706 5.39001 9.40554 5.39001C8.485 5.39001 7.74344 5.71359 7.17719 6.34482C6.62807 6.97604 6.3547 7.82924 6.3547 8.9029V14.1562H8.43597V9.05731C8.43597 7.98246 8.88822 7.4369 9.79281 7.4369C10.793 7.4369 11.2944 8.08408 11.2944 9.36376V12.1547H13.3634V9.36376C13.3634 8.08408 13.8646 7.4369 14.8648 7.4369C15.7694 7.4369 16.2216 7.98246 16.2216 9.05731V14.1562H18.3029V8.9029Z" fill="rgba(236,239,244,1)"></path></svg></a>
        

        

        
        <a href="https://ko-fi.com/wivik" rel="noopener noreferrer" class="social-button" title="Ko-Fi">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="36" height="36"><path d="M16 13V5H6V13C6 14.1046 6.89543 15 8 15H14C15.1046 15 16 14.1046 16 13ZM5 3H20C21.1046 3 22 3.89543 22 5V8C22 9.10457 21.1046 10 20 10H18V13C18 15.2091 16.2091 17 14 17H8C5.79086 17 4 15.2091 4 13V4C4 3.44772 4.44772 3 5 3ZM18 5V8H20V5H18ZM2 19H20V21H2V19Z" fill="rgba(236,239,244,1)"></path></svg>
        </a>
        

        

        

        <p class="rss-subscribe">
            <a href="http://localhost:1313/am-writing-hugo-theme/en/contact/" rel="noopener noreferrer" class="support-button rss-button" title="Contact">Contact</a>
        </p>

    </p>
    

    
    
    <h2 class="about">Keep informed</h2>
    <p class="rss-subscribe">
        <a href="http://localhost:1313/am-writing-hugo-theme/en/subscribe/" rel="noopener noreferrer" class="support-button rss-button" title="Find how to subscribe to this website content.">Subscribe</a>
    </p>
    

    
    
    <p class="rss-subscribe">
        <a href="http://localhost:1313/am-writing-hugo-theme/en/books/index.xml" rel="noopener noreferrer" class="support-button rss-button" title="Subscribe to the new books release using RSS.">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M3 17C5.20914 17 7 18.7909 7 21H3V17ZM3 10C9.07513 10 14 14.9249 14 21H12C12 16.0294 7.97056 12 3 12V10ZM3 3C12.9411 3 21 11.0589 21 21H19C19 12.1634 11.8366 5 3 5V3Z"></path></svg>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="18" height="18" fill="currentColor"><path d="M21 18H6C5.44772 18 5 18.4477 5 19C5 19.5523 5.44772 20 6 20H21V22H6C4.34315 22 3 20.6569 3 19V4C3 2.89543 3.89543 2 5 2H21V18ZM5 16.05C5.16156 16.0172 5.32877 16 5.5 16H19V4H5V16.05ZM16 9H8V7H16V9Z"></path></svg>
        </a>

    

    

    </p>
    

    <h2 class="about">Support me</h2>

    

    
    <p>
        <a href="https://ko-fi.com/wivik" rel="noopener noreferrer" class="support-button kofi-button">Support me on Ko-fi</a>
    </p>
    

    

    



    <p class="disclaimer"></p>

</article>

    </section>
    <section class="right">
      <div class="menu">
        <nav>
      <a href="/am-writing-hugo-theme/en/">
        Home
    </a>
      <a href="/am-writing-hugo-theme/en/books/">
        Books
    </a>
      <a href="/am-writing-hugo-theme/en/genres/">
        Genres
    </a>
      <a href="/am-writing-hugo-theme/en/legal/">
        Legal Notice
    </a>
</nav>
      </div>
      <div class="content">
        


<h1>Nuxt.js 如何部署 Artalk 和遇到的问题</h1>

<p><p>花了两天时间，终于把 Artalk 部署好了，一款数据自托管带后端的评论程序，非常适合我。这篇文章就介绍一下我部署的流程，以及我在部署过程中遇到的一些问题，将它记录一下，以便之后研究，顺便对使用 Nuxt.js 搭建博客的伙伴提供一些参考价值。</p>
<p>Artalk 地址：<a href="https://artalk.js.org/">https://artalk.js.org/</a></p>
<p>这篇文章我将分为三个部分，后端部署、前端部署、问题研究。</p>
<h2 id="1后端部署">1.后端部署</h2>
<p>官方有两个版本，注意分辨，php 和 go，对应的是不同的仓库，目前官方文档写的默认都是 go 语言开发的。</p>
<p>ArtalkGo 仓库：<a href="https://github.com/ArtalkJS/ArtalkGo">https://github.com/ArtalkJS/ArtalkGo</a></p>
<p>我使用的也是 go 版本，功能和优化都比较好。</p>
<hr>
<h3 id="docker-构建--宝塔">docker 构建 + 宝塔</h3>
<p>我的服务器是 Ubuntu 20.04，其他版本类似，没有很大不同。</p>
<p>首先，使用 ssh 连接服务器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>sudo su 
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 启用sudo模式</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>cd /www/wwwroot/
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 进入站点目录</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>mkdir ArtalkGo
</span></span><span style="display:flex;"><span>cd ArtalkGo
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 为 ArtalkGo 创建一个目录</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>curl -L https://raw.githubusercontent.com/ArtalkJS/ArtalkGo/master/artalk-go.example.yml &gt; conf.yml
</span></span><span style="display:flex;"><span><span style="color:#75715e"># 下载配置文件模版</span>
</span></span></code></pre></div><hr>
<p>到这里之后，官方说的是用 <code>vim conf.yml</code> 进入配置文件，修改参数然后配置。我不是很建议，因为用着并不是那么顺手（因为我菜），我建议直接到达 <code>/www/wwwroot/ArtalkGo</code> 目录下修改 <code>conf.yml</code> 文件，文本模式操作起来更顺手。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/02/18/1861474b101c0fb69d42e7f922a52fea.png"></p>
<p>里面的配置基本都是站点名称，管理员，邮箱等设置，没什么大问题。除此之外，端口等参数都不用碰，不然会报错。</p>
<p>配置完文件之后直接保存就行了。</p>
<hr>
<p>在宝塔插件里面下载 Docker 管理器，点击镜像管理。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/02/18/d2d1227986b852267f027bd6f815b7e9.png"></p>
<p>然后在镜像名称输入 <code>artalk/artalk-go</code> 点击获取镜像即可，大概两分钟就下载结束了。</p>
<p>然后回到 ssh 连接，新建 docker 容器。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker run -d <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   --name artalk-go <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -p 0.0.0.0:8080:23366 <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -v <span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span>/conf.yml:/conf.yml <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   -v <span style="color:#66d9ef">$(</span>pwd<span style="color:#66d9ef">)</span>/data:/data <span style="color:#ae81ff">\
</span></span></span><span style="display:flex;"><span><span style="color:#ae81ff"></span>   artalk/artalk-go
</span></span></code></pre></div><p>将上面的命令行在命令行，直接回车就行了。</p>
<p>这个时候需要去你的服务器厂商那里放行端口 <code>8080</code> ，如果之前放行过不用管，没有放行的话需要去设置一下。</p>
<p>然后在浏览器输入 <code>http://ip地址:8080</code> 。</p>
<p>如果出现现在这个页面，说明你部署成功了，如果打不开或者是其他情况，请检查是否成功执行上面的步骤。</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/02/18/571d246b4aa2e9574a2a543364a965d2.png"></p>
<hr>
<p>如果之后修改配置文件了，一定要注意在修改之后执行命令，需要重启服务才能生效。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>docker restart artalk-go
</span></span></code></pre></div><hr>
<h3 id="反向代理">反向代理</h3>
<p>这个如果使用宝塔太简单，就不细说了。</p>
<p><a href="https://artalk.js.org/guide/backend/reverse-proxy.html#%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF">https://artalk.js.org/guide/backend/reverse-proxy.html#%E5%AE%9D%E5%A1%94%E9%9D%A2%E6%9D%BF</a></p>
<p>文档已经说得很详细，如果出现操作失败的情况可以在下面评论。</p>
<hr>
<h2 id="2前端部署">2.前端部署</h2>
<p>博客使用 vue + nuxt 开发。</p>
<p>我使用的是通过 cdn 引入的，npm 我目前发现和我博客有些冲突，暂时不使用该方式。</p>
<p>先在 <code>/components</code> 目录下新建一个组件名为 <code>Comments.vue</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-html" data-lang="html"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- Comments.vue --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;wrapper&#34;</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">link</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/artalk@2.1.4/dist/Artalk.css&#34;</span> <span style="color:#a6e22e">rel</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;stylesheet&#34;</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">script</span> <span style="color:#a6e22e">src</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;https://cdn.jsdelivr.net/npm/artalk@2.1.4/dist/Artalk.js&#34;</span>&gt;&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>	&lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">id</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;Comments&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">div</span>&gt;
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">template</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">export</span> <span style="color:#66d9ef">default</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">name</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;Comments&#39;</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">script</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>&lt;<span style="color:#f92672">style</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;scss&#34;</span> <span style="color:#a6e22e">scoped</span>&gt;
</span></span><span style="display:flex;"><span>	<span style="color:#f92672">&lt;!</span><span style="color:#f92672">--</span> <span style="color:#f92672">css代码</span> <span style="color:#f92672">--</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>&lt;/<span style="color:#f92672">style</span>&gt;
</span></span></code></pre></div><hr>
<p>配置代码我单独放在 <code>/static/main.js</code> ，然后在 <code>nuxt.config.js</code> 引入。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#75715e">// nuxt.config.js
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">head</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">title</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;子舒的博客 | imhan.cn&#39;</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">meta</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">// ...
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    ]
</span></span><span style="display:flex;"><span>    <span style="color:#a6e22e">script</span><span style="color:#f92672">:</span> [
</span></span><span style="display:flex;"><span>      { <span style="color:#a6e22e">src</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;/js/main.js&#39;</span> },
</span></span><span style="display:flex;"><span>    ]
</span></span><span style="display:flex;"><span>  },
</span></span></code></pre></div><hr>
<p>在 <code>main.js</code> 中配置 Artick。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Artalk</span>({
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">el</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;#Comments&#34;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">server</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://域名/api&#39;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">site</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#34;子舒的博客&#34;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">placeholder</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;说点什么...&#39;</span>,
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">gravatar</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>	  <span style="color:#a6e22e">mirror</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;https://sdn.geekzu.org/avatar/&#39;</span>,
</span></span><span style="display:flex;"><span>	  <span style="color:#66d9ef">default</span><span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;mp&#39;</span>,
</span></span><span style="display:flex;"><span>	},
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">pagination</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>	  <span style="color:#a6e22e">pageSize</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">15</span>,   <span style="color:#75715e">// 每页评论数
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	  <span style="color:#a6e22e">readMore</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// 加载更多 or 分页条
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	  <span style="color:#a6e22e">autoLoad</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// 自动加载 (加载更多)
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	},
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">heightLimit</span><span style="color:#f92672">:</span> {
</span></span><span style="display:flex;"><span>	  <span style="color:#a6e22e">content</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">200</span>, <span style="color:#75715e">// 评论内容限高
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	  <span style="color:#a6e22e">children</span><span style="color:#f92672">:</span> <span style="color:#ae81ff">300</span>, <span style="color:#75715e">// 子评论区域限高
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>	},
</span></span><span style="display:flex;"><span>	<span style="color:#a6e22e">versionCheck</span><span style="color:#f92672">:</span> <span style="color:#66d9ef">true</span>, <span style="color:#75715e">// 前端版本检测
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>});
</span></span></code></pre></div><p>还有一个方案就是将文件放在服务器或者 github，将它引入，不过有些舍本逐末了，不是很建议。</p>
<hr>
<h2 id="3问题研究">3.问题研究</h2>
<p><strong>1. 关于评论路径问题</strong></p>
<p>提交评论之后会在管理后台生成一个列表，表示哪个路径产生了评论，</p>
<p><img src="https://imgurl.zishu.me/images/old/2022/02/18/5bb72fd1a3427c31aaaf91c8637435c8.png"></p>
<p>如果想把某个页面评论转到其他页面，可以直接修改页面的 url，<code>点击KEY变更</code>。</p>
<p>Artalk 的路径判断很严格，包括 <code>https://example.com/1</code> 和 <code>https://example.com/1/</code> 的评论就属于两个页面。</p>
<p>问过作者，觉得他的说法很有道理</p>
<blockquote>
<p>qwqcode: <a href="https://example.com/1">https://example.com/1</a> 和 <a href="https://example.com/1/">https://example.com/1/</a> 本来就不属于相同路径，后者等价于 <a href="https://example.com/1/index.html">https://example.com/1/index.html</a> (和 web 服务器配置有关)</p>
</blockquote>
<p>所以我直接在我博客里把路径然后默认加一个 <code>/</code> 符号，不管打开哪个页面都会跳转到带有 <code>/</code> 的 url，也是非常简单粗暴的解决了这个问题。</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-js" data-lang="js"><span style="display:flex;"><span><span style="color:#a6e22e">path</span><span style="color:#f92672">:</span> <span style="color:#e6db74">`/posts/</span><span style="color:#e6db74">${</span><span style="color:#a6e22e">key</span>.<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">&#39;.md&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>).<span style="color:#a6e22e">replace</span>(<span style="color:#e6db74">&#39;./&#39;</span>, <span style="color:#e6db74">&#39;&#39;</span>)<span style="color:#e6db74">}</span><span style="color:#e6db74">/`</span>
</span></span></code></pre></div><hr>
<p><strong>2. localhost:3000 和域名</strong></p>
<p>由此引发的另一个问题就是我在本地构建 <code>localhost:3000</code> 是不会显示域名后的评论，这个问题也不是大问题，我研究过 Artalk 文档，因为他是一个后端，可以多个前端使用，如果仅仅判断二级目录会造成一个很大的问题。</p>
<p><a href="https://a.com/1">https://a.com/1</a> 和 <a href="https://b.com/1">https://b.com/1</a>  这两个页面使用了同一套评论数据，所以为了避免这个情况，在判断路径时直接加上域名，这样的话，域名下的评论自然不会同步到 <code>localhost:3000</code> 。</p>
<p>这对我开发博客来说没有什么影响，所以就不打算解决了。</p>
<hr>
<p>这是我目前遇到的问题，我会在后续的使用中持续更新本文，以作留存。</p>
</p>



      </div>
    </section>
  </main>
  <footer>
    <p>Copyright 2024.
    
    Content licensed under Creative Commons BY-SA 4.0
    
</p>
<p class="footer-credits">
    Powered by 
    <a href="https://gohugo.io">Hugo</a> 
    using theme 
    <a href="https://github.com/Wivik/am-writing-hugo-theme" target="_blank" rel="noopener noreferrer">Am Writing</a> 
    licensed under MIT License
</p>
  </footer>
</body>
</html>
