<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>技术 | 子舒的博客</title><meta name=keywords content><meta name=description content="子舒的博客，记录生活"><meta name=author content="子舒"><link rel=canonical href=/categories/%E6%8A%80%E6%9C%AF/><link crossorigin=anonymous href=/assets/css/stylesheet.5ea1a2f851c645871793276dce298322e6dbf894e6328ec3a0b36446942b7f71.css integrity="sha256-XqGi+FHGRYcXkydtzimDIubb+JTmMo7DoLNkRpQrf3E=" rel="preload stylesheet" as=style><link rel=icon href=https://img.zburu.com/favicon.ico><link rel=mask-icon href=/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=/categories/%E6%8A%80%E6%9C%AF/index.xml><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="技术"><meta property="og:description" content="子舒的博客，记录生活"><meta property="og:type" content="website"><meta property="og:url" content="/categories/%E6%8A%80%E6%9C%AF/"><meta property="og:image" content="/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="ExampleSite"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="技术"><meta name=twitter:description content="子舒的博客，记录生活"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=/ accesskey=h title="子舒的博客 (Alt + H)">子舒的博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=/categories/ title=categories><span>categories</span></a></li><li><a href=/message/ title=message><span>message</span></a></li><li><a href=/lab/ title=lab><span>lab</span></a></li><li><a href=/about/ title=about><span>about</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>技术
<a href=/categories/%E6%8A%80%E6%9C%AF/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>一个优雅的字体压缩解决方案 ---fonttools</h2></header><div class=entry-content><p>分享一个 python 的库 —fonttools，针对字体文件进行处理非常方便。
下载 需要先在电脑上下载 python 环境，这个就不多说了。
然后在本地命令行输入：
pip install fonttools 字体库 本地新建一个文件夹，取名为 fonts ，随意即可。将自己需要压缩整理的字体放在文件夹中，如 OPPOSans.ttf 。 然后建立一个文件取名为 word.txt，这时我们需要找到一个常用字体库，这里我在github分享一个 https://github.com/zburu/cdn/blob/main/font/汉字常用字体.txt ，把里面的内容常用字体复制到 word.txt 文件。 运行 pyftsubset OPPOSans.ttf --text=$(cat word.txt) --no-hinting 我们看一下命令，其中 OPPOSans.ttf 是字体文件，word.txt 是常用字体，我们要将这些字单独分离出来。
名字都可以按照自己的要求来，但是一定要互相对应。
在命令行输入即可，运行完成之后，可以在文件夹中看到带有 subset 字样的字体文件，占用空间大大缩小，可以直接拿来使用。</p></div><footer class=entry-footer><span title='2022-05-24 00:00:00 +0000 UTC'>May 24, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;38 words&nbsp;·&nbsp;子舒</footer><a class=entry-link aria-label="post link to 一个优雅的字体压缩解决方案 ---fonttools" href=/blog/106.html/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>分享一款自用的 v2ex 主题样式</h2></header><div class=entry-content><p>起因是因为觉得 v2ex 网站主题略有拥挤，阅读体验不好，而正好网站支持自定义 css，所以就在参考其他人的基础上，修改了一套比较美观的样式。
本来是自用的，但是看到有人发帖分享主题，我也索性将它分享出来了。
v2ex 帖子: https://www.v2ex.com/t/851735
Github 仓库: https://github.com/zburu/v2ex_theme
不想看文档可以直接用下面的链接。
/* 通过 jsd 加速 github 文件 */ @import "https://cdn.jsdelivr.net/gh/zburu/v2ex_theme/v2ex_theme.min.css"; /* 放在我自己服务器上的链接 */ @import "https://cdn.zburu.com/list/v2ex_theme.css";</p></div><footer class=entry-footer><span title='2022-05-12 00:00:00 +0000 UTC'>May 12, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;26 words&nbsp;·&nbsp;子舒</footer><a class=entry-link aria-label="post link to 分享一款自用的 v2ex 主题样式" href=/blog/128.html/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>docker部署思源笔记</h2></header><div class=entry-content><p>文章废弃
部署 docker run --name siyuan -itd -p 6806:6806 -v /opt/my_siyuan_path:/opt/siyuan --restart always b3log/siyuan 备份 sudo su # 查看容器列表 docker ps -a # 制作备份 docker commit -p 7409ce6aae7b siyuan_backup # 其中 403e6db0c 是容器id, jenkins_backup是备份名称 # 查看备份是否成功 docker images # 将镜像制作成文件 docker save -o [filename] [image] docker save -o siyuan_backup.tar siyuan_backup ls # 在 /home/ubuntu/ 中可以看到制作后的压缩包</p></div><footer class=entry-footer><span title='2022-05-05 00:00:00 +0000 UTC'>May 5, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;55 words&nbsp;·&nbsp;子舒</footer><a class=entry-link aria-label="post link to docker部署思源笔记" href=/blog/124.html/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>浏览器收藏夹一键填写博客评论信息</h2></header><div class=entry-content><p>先点击收藏一个页面，然后右键它，选择修改，在网址输入框复制下面的js代码，就可以一键填入了。
将其中的昵称，邮箱，网址修改成自己的信息。
目前支持绝大多数主流博客平台和系统，如果发现没有起作用，可以在下面代码里面修改增加一下input的属性。
如果你不会修改的话，可以在评论区留言没有起作用的网站，我可以更新代码。
javascript:void function(){var lauthor=["#author","input[name='comname']","#inpName","input[name='author']","#ds-dialog-name","input[name='wc_name']", "input[name='nick']",],lmail=["#mail","#email","input[name='commail']","#inpEmail","input[name='email']","#ds-dialog-email","input[name='wc_email']","input[name='mail']",],lurl=["#url","input[name='comurl']","#inpHomePage","#ds-dialog-url","input[name='url']","input[name='wc_website']","input[name='link']",];for(i=0;i&lt;lauthor.length;i++){var author=document.querySelector(lauthor[i]);if(author!=null){author.value='子舒';break}}for(j=0;j&lt;lmail.length;j++){var mail=document.querySelector(lmail[j]);if(mail!=null){mail.value='shuxhan@163.com';break}}for(k=0;k&lt;lurl.length;k++){var url=document.querySelector(lurl[k]);if(url!=null){url.value='https://zishu.me';break}}return!1}()</p></div><footer class=entry-footer><span title='2022-04-26 00:00:00 +0000 UTC'>April 26, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;11 words&nbsp;·&nbsp;子舒</footer><a class=entry-link aria-label="post link to 浏览器收藏夹一键填写博客评论信息" href=/blog/120.html/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>在宝塔中使用青龙面板代挂京豆</h2></header><div class=entry-content><p>如题所述，想要在闲置的服务器中跑一些服务，青龙面板代挂京豆现存很多开源的脚本，安全性已经经过很多人验证，可以放心使用。
因此我也安排了一个脚本，成功部署之后，就写这篇不算教程的笔记来记录一下整个过程。
Github: https://github.com/6dylan6/jdpro 作者会更新一些部署的指令，如果安装不成功可以对照文档中的指令。
拉取镜像 我是在宝塔中运行服务的，也是非常简单方便。至于怎么安装宝塔，这里就不介绍了，之前写过一篇关于部署宝塔面板的教程，可以点击站内搜索。
如何安装宝塔面板？
需要买服务器可以 点击链接在腾讯云购买服务器有优惠哦~ 不嫖白不嫖，省个十几二十块钱不香吗？
先在软件商店中下载安装一个 Docker管理器 ，之后点击 设置 > 镜像管理 > 镜像获取。
然后输入 qinglong 进行搜索，选择第一个链接然后拉取。
创建容器 点击创建容器。
镜像就选择刚才拉取的那个，端口映射中的容器端口和服务器端口都填入5700，选择开机自启动，其他的都不用填，点击提交。
服务器的防火墙放行5700端口。
部署脚本 在浏览器输入 ip:5700 ，ip 地址就是你的服务器ip，会弹出一个青龙面板初始化配置，按照提示点击安装即可，没有特别复杂的。
都是用户名密码通知设置等，我选择的是邮箱通知。
安装完成后，在首页右上角点击新建任务，里面的内容直接复制即可。
名称随便填 命令填写 ql repo https://js.dayplus.xyz/https://github.com/6dylan6/jdpro.git "jd_|jx_|jddj_" "backUp" "^jd[^_]|USER|JD|function|sendNotify" 定时规则填写 0 0 0 * * * 点击确定即可。
完成之后，什么都先不要点。
环境变量 接下来来到面板左侧导航的 环境变量，点击新建变量，这里就需要京东账号的cookie值了，浏览器打开 m.jd.com ，登录账号，最后调成手机模式。
然后在右侧找到 network ，点击搜索js文件，找到前缀为 biz.json?..... 的文件，右侧会显示一个 cookie
找到其中的 pt_key与pt_pin ，很长看仔细。一起复制到新建变量的值里面，上面的名称输入 JD_COOKIE，最后点击确定。
运行 最后回到定时任务，在分页的最后一页，找到最开始的那个脚本，单击允许，就会一直转圈在运行中，等到运行结束之后，选择禁用它，以后会始终保定时运行的。
最后为了安全起见，把前面的脚本中带有 加密 二字的任务全部禁用。...</p></div><footer class=entry-footer><span title='2022-04-15 00:00:00 +0000 UTC'>April 15, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;71 words&nbsp;·&nbsp;子舒</footer><a class=entry-link aria-label="post link to 在宝塔中使用青龙面板代挂京豆" href=/blog/116.html/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>在nuxt中实现图片放大预览功能</h2></header><div class=entry-content><p>v-viewer 基于vue的一个插件，可以实现图片放大，缩小，旋转，拖拽，预览等各种功能，效果还是很棒的。这是我在Github摸鱼时发现的一个仓库，感觉很有用，就分享一下使用过程。
Github: https://github.com/mirari/v-viewer
1.安装 npm install v-viewer 2.用法 在 plugins 中新建 viewer.js 文件。
// /plugins/viewer.js import Vue from 'vue'; import Viewer from 'v-viewer' import 'viewerjs/dist/viewer.css' Vue.use(Viewer) Viewer.setDefaults({ Options: { 'inline': true, 'button': true, 'navbar': true, 'title': true, 'toolbar': true, 'tooltip': true, 'movable': true, 'zoomable': true, 'rotatable': true, 'scalable': true, 'transition': true, 'fullscreen': true, 'keyboard': true, 'url': 'data-source' } }) 然后再 nuxt.config.js 中引入。
// nuxt.config.js plugins: [ // ... { src: '@/plugins/viewer', ssr: false } ], 最后在使用的页面中引入。...</p></div><footer class=entry-footer><span title='2022-04-01 00:00:00 +0000 UTC'>April 1, 2022</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;89 words&nbsp;·&nbsp;子舒</footer><a class=entry-link aria-label="post link to 在nuxt中实现图片放大预览功能" href=/blog/112.html/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>在vue中制作canvas波浪图</h2></header><div class=entry-content><p>新建组件 Canvas.vue 。
// @/components/Canvas.vue &lt;template> &lt;div :style="{ height: waveAllHeight + 'px', background: bgColor }" class="wave"> &lt;canvas id="wave1">&lt;/canvas> &lt;canvas id="wave2">&lt;/canvas> &lt;canvas id="wave3">&lt;/canvas> &lt;/div> &lt;/template> &lt;script> export default { name: "Canvas", props: { bgColor: { default: "none", }, // 背景色 waveAllHeight: { default: 160 }, // 波浪的整体高度 waveCount: { default: 2 }, // 波峰个数 waveHeight: { default: 50 }, // 波浪起伏高度 // 波浪颜色 waveColor: { default () { return [ "#f3f3f3", "#f3f3f3", "#f3f3f3", ]; }, }, // 波浪速率 waveTime: { default () { return [4000, 4000, 4000]; }, }, }, data () { return {}; }, mounted () { this....</p></div><footer class=entry-footer><span title='2022-03-29 00:00:00 +0000 UTC'>March 29, 2022</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;343 words&nbsp;·&nbsp;子舒</footer><a class=entry-link aria-label="post link to 在vue中制作canvas波浪图" href=/blog/111.html/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=/categories/%E6%8A%80%E6%9C%AF/page/4/>«&nbsp;Prev&nbsp;</a>
<a class=next href=/categories/%E6%8A%80%E6%9C%AF/page/6/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>&copy; 2023 <a href=/>子舒的博客</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>